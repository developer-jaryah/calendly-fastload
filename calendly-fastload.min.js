!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).CalendlyFastLoad={})}(this,(function(e){"use strict";e.CalendlyFastLoad=class{constructor(e={}){this.calendlyUrl=e.calendlyUrl||"https://calendly.com/your-username",this.widgetJs="https://assets.calendly.com/assets/external/widget.js",this.widgetCss="https://assets.calendly.com/assets/external/widget.css",this.lazyLoadTrigger=e.lazyLoadTrigger||"click",this.containerSelector=e.containerSelector||".calendly-container",this.triggerSelector=e.triggerSelector||".calendly-trigger"}init(){this.preloadResources(),this.prefetchDNS(),this.registerServiceWorker(),this.setupLazyLoad()}preloadResources(){const e=document.createElement("link");e.rel="preload",e.href=this.widgetJs,e.as="script",document.head.appendChild(e);const t=document.createElement("link");t.rel="preload",t.href=this.widgetCss,t.as="style",document.head.appendChild(t)}prefetchDNS(){["https://calendly.com","https://assets.calendly.com"].forEach((e=>{const t=document.createElement("link");t.rel="dns-prefetch",t.href=e,document.head.appendChild(t)}))}registerServiceWorker(){"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").catch((e=>{console.warn("CalendlyFastLoad: Service Worker registration failed:",e)}))}setupLazyLoad(){if("immediate"===this.lazyLoadTrigger)this.loadWidget();else if("click"===this.lazyLoadTrigger){const e=document.querySelector(this.triggerSelector);e?e.addEventListener("click",(()=>this.loadWidget())):console.warn("CalendlyFastLoad: Trigger element not found")}else if("visible"===this.lazyLoadTrigger){const e=document.querySelector(this.containerSelector);if(e){const t=new IntersectionObserver((([e])=>{e.isIntersecting&&(this.loadWidget(),t.disconnect())}));t.observe(e)}else console.warn("CalendlyFastLoad: Container element not found")}}loadWidget(){if(window.Calendly)return void this.initializeWidget();const e=document.createElement("script");e.src=this.widgetJs,e.async=!0,e.onload=()=>this.initializeWidget(),document.body.appendChild(e);const t=document.createElement("link");t.rel="stylesheet",t.href=this.widgetCss,document.head.appendChild(t)}initializeWidget(){window.Calendly.showPopupWidget(this.calendlyUrl,"PopupWidget",{parentElement:document.querySelector(this.containerSelector)})}},Object.defineProperty(e,"__esModule",{value:!0})}));
